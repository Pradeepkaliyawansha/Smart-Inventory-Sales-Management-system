<div class="customer-form-container">
  <mat-card class="form-card">
    <mat-card-header>
      <mat-card-title>
        {{ isEditMode ? "Edit Customer" : "Add New Customer" }}
      </mat-card-title>
      <mat-card-subtitle>
        {{
          isEditMode ? "Update customer information" : "Enter customer details"
        }}
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form
        [formGroup]="customerForm"
        (ngSubmit)="onSubmit()"
        class="customer-form"
      >
        <div class="form-row">
          <!-- Customer Name -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Customer Name</mat-label>
            <input
              matInput
              formControlName="name"
              placeholder="Enter full name"
            />
            <mat-icon matSuffix>person</mat-icon>
            <mat-error
              *ngIf="
                customerForm.get('name')?.invalid &&
                customerForm.get('name')?.touched
              "
            >
              {{ getErrorMessage("name") }}
            </mat-error>
          </mat-form-field>

          <!-- Email -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Email Address</mat-label>
            <input
              matInput
              type="email"
              formControlName="email"
              placeholder="Enter email"
            />
            <mat-icon matSuffix>email</mat-icon>
            <mat-error
              *ngIf="
                customerForm.get('email')?.invalid &&
                customerForm.get('email')?.touched
              "
            >
              {{ getErrorMessage("email") }}
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <!-- Phone -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Phone Number</mat-label>
            <input
              matInput
              formControlName="phone"
              placeholder="Enter phone number"
            />
            <mat-icon matSuffix>phone</mat-icon>
            <mat-error
              *ngIf="
                customerForm.get('phone')?.invalid &&
                customerForm.get('phone')?.touched
              "
            >
              {{ getErrorMessage("phone") }}
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Address -->
        <mat-form-field appearance="outline" class="form-field full-width">
          <mat-label>Address</mat-label>
          <textarea
            matInput
            formControlName="address"
            placeholder="Enter full address"
            rows="3"
          ></textarea>
          <mat-icon matSuffix>location_on</mat-icon>
          <mat-error
            *ngIf="
              customerForm.get('address')?.invalid &&
              customerForm.get('address')?.touched
            "
          >
            {{ getErrorMessage("address") }}
          </mat-error>
        </mat-form-field>

        <!-- Form Actions -->
        <div class="form-actions">
          <button
            mat-button
            type="button"
            (click)="onCancel()"
            [disabled]="loading"
            class="cancel-button"
          >
            Cancel
          </button>
          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="customerForm.invalid || loading"
            class="submit-button"
          >
            <mat-spinner
              *ngIf="loading"
              diameter="20"
              class="button-spinner"
            ></mat-spinner>
            <span *ngIf="!loading">{{
              isEditMode ? "Update Customer" : "Create Customer"
            }}</span>
            <span *ngIf="loading">{{
              isEditMode ? "Updating..." : "Creating..."
            }}</span>
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
